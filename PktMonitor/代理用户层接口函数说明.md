# 代理用户层接口函数说明（from ProxyLib）

## 01 Sha1Hash(path):

### 功能说明：

使用Sha1算法，计算特定文件的160位哈希值。

调用需要提供SID的函数（如ANN），或进行内容验证时会用到。

### 参数说明：

path： String类型，为特定文件对应的路径字符串，如'F:\\研一下\\系统搭建\\代码实现\\kebiao.png'。

## 02 AddCacheSidUnit(path, AM, N, L, I, level=-1):

### 功能说明：

生成单个SID通告单元到待通告Cache中。

### 参数说明：

path：同上

AM：含义同announce_unit的AM字段（详见：包格式8文档）。int类型，可为1~3。

N：含义同announce_unit的N字段。int类型，可为0~1。

L：含义同announce_unit的L字段。int类型，可为0~1。

I：含义同announce_unit的I字段。int类型，可为0~1。

level：可选策略字段，标注当前SidUnit等级。int类型，可为1~10，或不填。

## 03 DeleteCacheSidUnit(path):

### 功能说明：

从待通告Cache中删除已生成但未通告的SID策略单元。

### 参数说明：

path：同上

## 04 SidAnn(ttl=64, PublicKey='', P=1):

### 功能说明：

从待通告Cache中整合已生成SID策略单元，向RM发送对应ANN报文。

### 参数说明：

ttl：可选字段，含义同通告包的ttl字段。int类型，可为0~255。

PublicKey：可选字段，含义同通告包的Public_key字段。String类型，规定内含字符为16进制字符（0~9，a~f），字符串长度为2的倍数，最短长度为2。

P：可选字段，含义同通告包的P字段。int类型，可为0~1。

## 05 def Get(SID, path, ttl=64, PublicKey='', QoS='', SegID=-1, A=1):

### 功能说明：

发送Get报文，从网络中获取特定SID对应的内容，存储到规定位置。

### 参数说明：

SID：希望从网络中获取内容的SID。String类型，规定内含字符为16进制字符（0~9，a~f），长度为32（仅N_sid）、40（仅L_sid）或72（完整SID）。

path：从网络获取内容后期望存储的位置（含文件名！）。格式同此前path。

ttl：可选字段，含义同get包的ttl字段。int类型，可为0~255。

PublicKey：可选字段，含义同get包的Public_key字段。格式同此前PublicKey。

QoS：可选字段，含义同get包的QoS_requirements字段。格式同PublicKey。

SegID：可选字段，含义同get包的Seg_ID字段。int类型，可选范围为0~0xffffffff。

A：可选字段，含义同get包的A字段。int类型，可为0~1。